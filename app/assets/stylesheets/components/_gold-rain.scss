// Gold Rain Animation Component - Flexible System for Full-Screen and Localized Effects
//
// Usage:
// Full-screen (Level Up): <div data-controller="gold-rain" data-gold-rain-mode-value="fullscreen"></div>
// Localized (Challenge Card): <div data-controller="gold-rain" data-gold-rain-mode-value="localized"></div>
//
// Trigger via JavaScript: goldRainController.trigger()

// Container base styles (applied via JavaScript controller)
// Base styles are applied via inline styles in controller for flexibility
// These classes are used for targeting and mode-specific styling

// Rain column container
.gold-rain-column {
  position: absolute;
  top: 0;
  height: 100%;
}

// Individual gold coin
.gold-rain-coin {
  position: absolute;
  // Size and positioning handled inline by controller for flexibility
  filter: drop-shadow(0 0 8px rgba(201, 162, 78, 0.6)) drop-shadow(0 0 4px rgba(201, 162, 78, 0.4));
  will-change: transform, opacity;
}

// Full-screen animation (for level ups)
// Coins fall from top to bottom of viewport with dramatic rotation
@keyframes gold-rain-fullscreen {
  0% {
    transform: translateY(-150px) rotate(0deg) scale(0.8);
    opacity: 0;
  }
  5% {
    opacity: 0.95;
    transform: translateY(-100px) rotate(180deg) scale(1);
  }
  95% {
    opacity: 0.95;
    transform: translateY(calc(100vh + 100px)) rotate(720deg) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(calc(100vh + 150px)) rotate(900deg) scale(0.8);
  }
}

// Localized animation (for challenge cards)
// Shorter, more contained fall within card boundaries
@keyframes gold-rain-localized {
  0% {
    transform: translateY(-50px) rotate(0deg) scale(0.7);
    opacity: 0;
  }
  10% {
    opacity: 1;
    transform: translateY(0) rotate(90deg) scale(1);
  }
  90% {
    opacity: 1;
    transform: translateY(calc(100% + 50px)) rotate(360deg) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(calc(100% + 100px)) rotate(450deg) scale(0.7);
  }
}

// Additional visual effects for full-screen mode
.gold-rain-fullscreen {
  // Add subtle background overlay for dramatic effect (optional)
  // background: linear-gradient(to bottom, rgba(201, 162, 78, 0.05) 0%, transparent 100%);
  
  .gold-rain-coin {
    // Larger glow effect for full-screen
    filter: drop-shadow(0 0 12px rgba(201, 162, 78, 0.8)) 
            drop-shadow(0 0 6px rgba(201, 162, 78, 0.5))
            drop-shadow(0 0 2px rgba(201, 162, 78, 0.3));
  }
}

// Subtle effect for localized mode
.gold-rain-localized {
  .gold-rain-coin {
    // Smaller, more subtle glow for card context
    filter: drop-shadow(0 0 6px rgba(201, 162, 78, 0.6)) 
            drop-shadow(0 0 3px rgba(201, 162, 78, 0.4));
  }
}

// Performance optimization
.gold-rain-fullscreen,
.gold-rain-localized {
  // Use GPU acceleration
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

// Responsive adjustments for mobile
@media (max-width: 768px) {
  .gold-rain-fullscreen {
    // Reduce coin count on mobile for better performance
    .gold-rain-coin {
      filter: drop-shadow(0 0 8px rgba(201, 162, 78, 0.6));
    }
  }
  
  .gold-rain-localized .gold-rain-coin {
    // Keep localized effects consistent on mobile
    filter: drop-shadow(0 0 5px rgba(201, 162, 78, 0.5));
  }
}

// Animation states for manual control
.gold-rain-paused {
  .gold-rain-coin {
    animation-play-state: paused;
  }
}

.gold-rain-stopped {
  .gold-rain-coin {
    animation: none;
  }
}
